@model ICollection<Nutrition.Models.Diet>
@{
    ViewBag.Title = "Details";
}

<div class="container" data-spy="scroll" data-target="#myScrollspy">
    <div class="jumbotron">
        <h1>Моите диети</h1>
    </div>
    <div class="row">
        <div class="col-xs-3" id="myScrollspy">
            <ul class="nav nav-tabs nav-stacked affix-top" data-spy="affix" data-offset-top="125">
                @{
                    int count = 1;
                }
                @foreach (var diet in Model)
                {
                    if (count == 1)
                    {
                        <li class="active"><a href="#section-@count">@diet.Name</a></li>
                    }
                    else
                    {
                        <li><a href="#section-@count">@diet.Name</a></li>
                    }

                    count++;
                }
            </ul>
        </div>
        <div class="col-xs-9">
            @{
                int counter = 0;
            }
            @foreach (var diet in Model)
            {
                <h2 id="section-@(counter+1)">@diet.Name</h2>
                <div class="panel-group" id="accordion">
                    @if (diet.Days.Count < diet.NumberOfDays)
                    {
                        @Html.ActionLink("Добави дни", "CreateDays", "Day", new { dietId = diet.ID, numberOfDays = diet.NumberOfDays }, null)
                    }
                    @foreach (var day in diet.Days)
                    {
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#@day.Number">Ден @day.Number</a>
                                </h4>
                            </div>
                            <div id="@day.Number" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    @day.Description
                                    @Html.ActionLink("Детайли", "DayDetails", "Day", new { dayId = day.ID }, null)
                                </div>
                            </div>
                        </div>
                        <hr>
                    }
                </div>
            }

        </div>
    </div>
</div>

@section styles{
    <style type="text/css">
        /* Custom Styles */
        ul.nav-tabs {
            width: 140px;
            margin-top: 20px;
            border-radius: 4px;
            border: 1px solid #ddd;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.067);
        }

            ul.nav-tabs li {
                margin: 0;
                border-top: 1px solid #ddd;
            }

                ul.nav-tabs li:first-child {
                    border-top: none;
                }

                ul.nav-tabs li a {
                    margin: 0;
                    padding: 8px 16px;
                    border-radius: 0;
                }

                ul.nav-tabs li.active a, ul.nav-tabs li.active a:hover {
                    color: #fff;
                    background: #0088cc;
                    border: 1px solid #0088cc;
                }

                ul.nav-tabs li:first-child a {
                    border-radius: 4px 4px 0 0;
                }

                ul.nav-tabs li:last-child a {
                    border-radius: 0 0 4px 4px;
                }

            ul.nav-tabs.affix {
                top: 30px; /* Set the top position of pinned element */
            }
    </style>
}